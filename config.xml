<?xml version='1.0' encoding='utf-8'?>
<widget id="mk.clicaid.app" version="1.9.7"
        xmlns="http://www.w3.org/ns/widgets"
        xmlns:cdv="http://cordova.apache.org/ns/1.0">

    <name>Clicaid Prozakon</name>
    <description>С нами Ваша жизнь будет в безопасности</description>
    <author email="info@clicaid.ru" href="https://clicaid.ru">Clicaid</author>

    <content src="index.html" />

    <access origin="*" />
    <allow-intent href="http://*/*" />
    <allow-intent href="https://*/*" />
    <allow-intent href="tel:*" />
    <allow-intent href="sms:*" />
    <allow-intent href="mailto:*" />
    <allow-intent href="geo:*" />

    <preference name="orientation" value="portrait" />
    <preference name="loadUrlTimeoutValue" value="50000" />

    <!-- Платформы -->
    <engine name="android" spec="14.0.1" />
    <engine name="ios" spec="7.1.1" />
    <engine name="browser" />

    <!-- iOS -->
    <platform name="ios">

<icon src="icon-1024.png" width="1024" height="1024"/>
<icon src="icon-small.png" width="29" height="29"/>
<icon src="icon-small@2x.png" width="58" height="58"/>
<icon src="icon-small@3x.png" width="87" height="87"/>
<icon src="icon-40.png" width="40" height="40"/>
<icon src="icon-40@2x.png" width="80" height="80"/>
<icon src="icon-50.png" width="50" height="50"/>
<icon src="icon-50@2x.png" width="100" height="100"/>
<icon src="icon.png" width="57" height="57"/>
<icon src="icon@2x.png" width="114" height="114"/>
<icon src="icon-60.png" width="60" height="60"/>
<icon src="icon-60@2x.png" width="120" height="120"/>
<icon src="icon-60@3x.png" width="180" height="180"/>
<icon src="icon-72.png" width="72" height="72"/>
<icon src="icon-72@2x.png" width="144" height="144"/>
<icon src="icon-76.png" width="76" height="76"/>
<icon src="icon-76@2x.png" width="152" height="152"/>
<icon src="icon-167.png" width="167" height="167"/>
<icon src="icon-83.5@2x.png" width="167" height="167"/>
<!--  Storyboard portrait  -->
<splash src="Default@2x~iphone~anyany.png"/>
<splash src="Default@2x~iphone~comany.png"/>
<splash src="Default@3x~iphone~anyany.png"/>
<splash src="Default@3x~iphone~comany.png"/>
<splash src="Default@2x~ipad~anyany.png"/>
<splash src="Default@2x~ipad~comany.png"/>

        <edit-config file="*-Info.plist" mode="merge" target="CFBundleDisplayName">
            <string>Clicaid Прозакон</string>
        </edit-config>

        <edit-config file="*-Info.plist" mode="merge" target="NSLocationWhenInUseUsageDescription">
            <string>Приложению требуется доступ к вашей геолокации, чтобы показывать актуальную информацию и ближайшие объекты.</string>
        </edit-config>

        <edit-config file="*-Info.plist" mode="merge" target="NSLocationAlwaysAndWhenInUseUsageDescription">
            <string>Приложению требуется постоянный доступ к геолокации для работы в фоновом режиме и предоставления актуальной информации о ближайших объектах даже когда приложение не активно.</string>
        </edit-config>

        <!-- OneSignal iOS -->
        <config-file parent="OneSignal_APP_ID" target="*-Info.plist">
            <string>8c912104-8b46-497f-9ea2-d0cd76def931</string>
        </config-file>

        <config-file parent="OneSignal_notificationServiceExtension" target="*-Info.plist">
            <string>NotificationService</string>
        </config-file>

        <edit-config file="*-Info.plist" mode="merge" target="NSRemoteNotificationUsageDescription">
            <string>Для отправки уведомлений о важных событиях и обновлениях.</string>
        </edit-config>

        <config-file parent="UIBackgroundModes" target="*-Info.plist">
            <array>
                <string>remote-notification</string>
            </array>
        </config-file>

        <edit-config file="*-Info.plist" mode="merge" target="NSMicrophoneUsageDescription">
            <string>Для воспроизведения звука уведомлений</string>
        </edit-config>
    </platform>

    <!-- Android -->
    <platform name="android">
        <allow-intent href="market:*" />

<preference name="SplashMaintainAspectRatio" value="true"/>
<preference name="SplashShowOnlyFirstTime" value="true"/>
<!--  Needed for Android 12  -->
<preference name="AndroidWindowSplashScreenAnimatedIcon" value="res/screen/android/splash-square.png"/>
<preference name="AndroidWindowSplashScreenBackground" value="#ffffff"/>
<icon density="ldpi" src="ldpi.png"/>
<icon density="mdpi" src="mdpi.png"/>
<icon density="hdpi" src="hdpi.png"/>
<icon density="xhdpi" src="xhdpi.png"/>
<icon density="xxhdpi" src="xxhdpi.png"/>
<icon density="xxxhdpi" src="xxxhdpi.png"/>
<!--  Portrait  -->
<splash density="port-ldpi" src="splash-port-ldpi.png"/>
<splash density="port-mdpi" src="splash-port-mdpi.png"/>
<splash density="port-hdpi" src="splash-port-hdpi.png"/>
<splash density="port-xhdpi" src="splash-port-xhdpi.png"/>
<splash density="port-xxhdpi" src="splash-port-xxhdpi.png"/>
<splash density="port-xxxhdpi" src="splash-port-xxxhdpi.png"/>

        <preference name="AndroidXEnabled" value="true" />
        <preference name="AndroidPersistentFileLocation" value="Compatibility" />
        <preference name="SplashScreenDelay" value="1000" />
        <preference name="AutoHideSplashScreen" value="true" />
        <preference name="FadeSplashScreen" value="true" />
        <preference name="FadeSplashScreenDuration" value="2000" />

        <!-- android:exported для MainActivity -->
        <edit-config file="app/src/main/AndroidManifest.xml"
                     mode="merge"
                     target="/manifest/application/activity"
                     xmlns:android="http://schemas.android.com/apk/res/android">
            <activity android:exported="true" />
        </edit-config>

        <preference name="android-targetSdkVersion" value="34" />
    </platform>

    <!-- Плагины -->
    <plugin name="cordova-plugin-network-information" spec="^2.0.2" />
    <plugin name="cordova-plugin-geolocation" spec="^5.0.0">
        <variable name="GPS_REQUIRED" value="true" />
    </plugin>
    <plugin name="cordova-plugin-camera" spec="^7.0.0" />
    <plugin name="cordova-plugin-crop" spec="^0.4.0" />
    <plugin name="cordova-plugin-theme-detection" spec="^0.1.0" />
    <plugin name="cordova-plugin-android-permissions" spec="^1.1.5" />
    <plugin name="onesignal-cordova-plugin" spec="5.2.16" />

    <!-- Общие Android-префы -->
    <preference name="android-minSdkVersion" value="24" />
    <preference name="android-targetSdkVersion" value="35" />
    <preference name="android-compileSdkVersion" value="35" />

    <!-- OneSignal Android -->
    <preference name="onesignal-android-sender-id" value="897966400632" />
    <preference name="onesignal-autoRegister" value="true" />
    <preference name="onesignal-notification-opened-handler" value="true" />
</widget>
